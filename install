#!/usr/bin/env bash

basepath="$(dirname $0)"
cd $basepath

./fetcher

configurations=($(ls ./hyprland))

deploy() {
    cp -r "./hyprland/$1" "${HOME}/.config/$1"
    echo "${HOME}/.config/$1 deployed"
}

./uninstall

for configuration in ${configurations[*]}; do
    deploy $configuration
done

sudo cp -r ./greetd /etc/
sudo chown -R greeter:greeter /etc/greetd
echo "greetd deployed"

sudo usermod -aG i2c $USER

Hyprland --config installer/hyprland.conf
newgrp

if [$(systemctl is-active --quiet greetd.service) != "active" ]; then
    sudo systemctl enable greetd.service --force
fi
